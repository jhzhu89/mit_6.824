=== RUN   TestRejoin2B
Test (2B): rejoin of partitioned leader ...
2017/03/15 23:14:53 [0 - Follower] - start to run as follower...
2017/03/15 23:14:53 [node: 0] - in runFollower()...
2017/03/15 23:14:53 [1 - Follower] - start to run as follower...
2017/03/15 23:14:53 [node: 1] - in runFollower()...
2017/03/15 23:14:53 [2 - Follower] - start to run as follower...
2017/03/15 23:14:53 [node: 2] - in runFollower()...
2017/03/15 23:14:54 [0 - Follower] - election timed out, promote to candidate...
2017/03/15 23:14:54 [0 - Candidate] - start to run as candidate...
2017/03/15 23:14:54 [1 - Follower] - election timer stopped...
2017/03/15 23:14:54 [1 - Follower] - vote granted: {RequestVoteReply - Term: 1, VoteGranted: true}...
2017/03/15 23:14:54 [1 - Follower] - election timer reset...
2017/03/15 23:14:54 [2 - Follower] - election timer stopped...
2017/03/15 23:14:54 [2 - Follower] - vote granted: {RequestVoteReply - Term: 1, VoteGranted: true}...
2017/03/15 23:14:54 [2 - Follower] - election timer reset...
2017/03/15 23:14:54 [0 - Candidate] - got enough votes, promote to Leader...
2017/03/15 23:14:54 [0 - Leader] - start to run as leader...
2017/03/15 23:14:54 [0 - Leader] - received an append msg: &{{0 0 101} true 0xc420019e60}...
2017/03/15 23:14:54 [2 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 0, PrevLogTerm: -1, LeaderCommit: 0, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/15 23:14:54 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 0, PrevLogTerm: -1, LeaderCommit: 0, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/15 23:14:54 [0 - Leader] - follower 2 try to commit range: 1, 1
2017/03/15 23:14:54 [0 - Leader] - receives commit signal, send to applyCh...
2017/03/15 23:14:54 [0 - Leader] - send raft.LogEntry{Index:1, Term:1, Command:101} to applyCh...
2017/03/15 23:14:54 [0 - Leader] - follower 1 try to commit range: 1, 1
2017/03/15 23:14:54 [1 - Follower] - apply log raft.LogEntry{Index:1, Term:1, Command:101}...
2017/03/15 23:14:54 [2 - Follower] - apply log raft.LogEntry{Index:1, Term:1, Command:101}...
2017/03/15 23:14:55 [0 - Leader] - received an append msg: &{{0 0 102} true 0xc4201678c0}...
2017/03/15 23:14:55 [0 - Leader] - received an append msg: &{{0 0 103} true 0xc420167920}...
2017/03/15 23:14:57 [1 - Follower] - election timed out, promote to candidate...
2017/03/15 23:14:57 [1 - Candidate] - start to run as candidate...
2017/03/15 23:14:57 [2 - Follower] - election timer stopped...
2017/03/15 23:14:57 [2 - Follower] - vote granted: {RequestVoteReply - Term: 2, VoteGranted: true}...
2017/03/15 23:14:57 [2 - Follower] - election timer reset...
2017/03/15 23:14:57 [1 - Candidate] - got enough votes, promote to Leader...
2017/03/15 23:14:57 [1 - Leader] - start to run as leader...
2017/03/15 23:14:58 [1 - unsure] - sendRequestVote to peer 0 RPC failed...
2017/03/15 23:14:58 [0 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 2
2017/03/15 23:15:00 [0 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 1
2017/03/15 23:15:00 [0 - Leader] - received an append msg: &{{0 0 104} true 0xc4202c6c60}...
2017/03/15 23:15:02 [0 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 1
2017/03/15 23:15:04 [0 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 1
2017/03/15 23:15:06 [0 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 2
2017/03/15 23:15:06 [1 - Leader] - received an append msg: &{{0 0 103} true 0xc420416420}...
2017/03/15 23:15:06 [2 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 2, LeaderId: 1, PrevLogIndex: 0, PrevLogTerm: -1, LeaderCommit: 1, reply: {AppendEntriesReply - Term: 2, Success: true}...
2017/03/15 23:15:06 [1 - Leader] - follower 2 try to commit range: 1, 2
2017/03/15 23:15:06 [1 - Leader] - receives commit signal, send to applyCh...
2017/03/15 23:15:06 [1 - Leader] - send raft.LogEntry{Index:2, Term:2, Command:103} to applyCh...
2017/03/15 23:15:06 [2 - Follower] - apply log raft.LogEntry{Index:2, Term:2, Command:103}...
2017/03/15 23:15:06 [0 - Leader] - received an append msg: &{{0 0 104} true 0xc420416f60}...
2017/03/15 23:15:06 [0 - Leader] - step down signal sent...
2017/03/15 23:15:07 [1 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 2, LeaderId: 1, PrevLogIndex: 0, PrevLogTerm: -1, LeaderCommit: 1) to follower: 0
2017/03/15 23:15:08 [2 - Follower] - election timed out, promote to candidate...
2017/03/15 23:15:08 [2 - Candidate] - start to run as candidate...
2017/03/15 23:15:08 [0 - Leader] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 2
2017/03/15 23:15:08 [0 - Leader] - received a RPC request: {RequestVoteArgs - Term: 3, CandidateId: 2, LastLogIndex: 2, LastLogTerm: 2}...
2017/03/15 23:15:08 [0 - Leader] - a larger Term seen, will fall back to Follower...
2017/03/15 23:15:08 [0 - Leader] - vote granted: {RequestVoteReply - Term: 3, VoteGranted: true}...
2017/03/15 23:15:08 [0 - Leader] - state change from Leader to Follower...
2017/03/15 23:15:08 [2 - Candidate] - got enough votes, promote to Leader...
2017/03/15 23:15:08 [2 - Leader] - start to run as leader...
2017/03/15 23:15:08 [2 - Leader] - received a RPC request: {AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1...
2017/03/15 23:15:08 [0 - Follower] - decrement nextIndex by 1 and retry...
2017/03/15 23:15:08 [0 - Follower] - cancelled to replicate to 2...
2017/03/15 23:15:10 [0 - Follower] - failed to sendAppendEntries({AppendEntriesArgs - Term: 1, LeaderId: 0, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1) to follower: 1
2017/03/15 23:15:10 [0 - Follower] - start to run as follower...
2017/03/15 23:15:10 [node: 0] - in runFollower()...
2017/03/15 23:15:10 [0 - Follower] - apply log raft.LogEntry{Index:2, Term:1, Command:102}...
2017/03/15 23:15:10 apply error: commit index=2 server=0 102 != server=2 103
exit status 1
FAIL	github.com/jhzhu89/6.824/src/raft	16.484s
