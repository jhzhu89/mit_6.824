=== RUN   TestFailAgree2B
2017/03/16 14:58:22 [0 - Follower] - start to run as follower...
2017/03/16 14:58:22 [node: 0] - in runFollower()...
2017/03/16 14:58:22 [1 - Follower] - start to run as follower...
2017/03/16 14:58:22 [node: 1] - in runFollower()...
2017/03/16 14:58:22 [2 - Follower] - start to run as follower...
2017/03/16 14:58:22 [node: 2] - in runFollower()...
Test (2B): agreement despite follower failure ...
2017/03/16 14:58:23 [2 - Follower] - election timed out, promote to candidate...
2017/03/16 14:58:23 [2 - Candidate] - start to run as candidate...
2017/03/16 14:58:23 [1 - Follower] - election timer stopped...
2017/03/16 14:58:23 [0 - Follower] - election timer stopped...
2017/03/16 14:58:23 [1 - Follower] - vote granted: {RequestVoteReply - Term: 1, VoteGranted: true}...
2017/03/16 14:58:23 [1 - Follower] - election timer reset...
2017/03/16 14:58:23 [0 - Follower] - vote granted: {RequestVoteReply - Term: 1, VoteGranted: true}...
2017/03/16 14:58:23 [0 - Follower] - election timer reset...
2017/03/16 14:58:23 [2 - Candidate] - got enough votes, promote to Leader...
2017/03/16 14:58:23 [2 - Leader] - start to run as leader...
2017/03/16 14:58:23 [2 - Leader] - received an append msg: &{{0 0 101} true 0xc4201187e0}...
2017/03/16 14:58:23 [0 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 0, PrevLogTerm: -1, LeaderCommit: 0, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:23 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 0, PrevLogTerm: -1, LeaderCommit: 0, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:23 [2 - Leader] - follower 0 try to commit range: 1, 1
2017/03/16 14:58:23 [2 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:23 [2 - Leader] - lastApplied(before): 0...
2017/03/16 14:58:23 [2 - Leader] - follower 1 try to commit range: 1, 1
2017/03/16 14:58:23 [2 - Leader] - send raft.LogEntry{Index:1, Term:1, Command:101} to applyCh...
2017/03/16 14:58:23 [2 - Leader] - lastApplied(after): 1...
2017/03/16 14:58:23 [1 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:23 [1 - Follower] - lastApplied(before): 0...
2017/03/16 14:58:23 [1 - Follower] - apply log raft.LogEntry{Index:1, Term:1, Command:101}...
2017/03/16 14:58:23 [1 - Follower] - lastApplied(after): 1...
2017/03/16 14:58:23 [0 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:23 [0 - Follower] - lastApplied(before): 0...
2017/03/16 14:58:23 [0 - Follower] - apply log raft.LogEntry{Index:1, Term:1, Command:101}...
2017/03/16 14:58:23 [0 - Follower] - lastApplied(after): 1...
2017/03/16 14:58:24 [2 - Leader] - received an append msg: &{{0 0 102} true 0xc4201e8540}...
2017/03/16 14:58:24 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 1, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:24 [2 - Leader] - follower 1 try to commit range: 2, 2
2017/03/16 14:58:24 [2 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:24 [2 - Leader] - lastApplied(before): 1...
2017/03/16 14:58:24 [2 - Leader] - send raft.LogEntry{Index:2, Term:1, Command:102} to applyCh...
2017/03/16 14:58:24 [2 - Leader] - lastApplied(after): 2...
2017/03/16 14:58:24 [1 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:24 [1 - Follower] - lastApplied(before): 1...
2017/03/16 14:58:24 [1 - Follower] - apply log raft.LogEntry{Index:2, Term:1, Command:102}...
2017/03/16 14:58:24 [1 - Follower] - lastApplied(after): 2...
2017/03/16 14:58:24 [2 - Leader] - received an append msg: &{{0 0 103} true 0xc4201de7e0}...
2017/03/16 14:58:24 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 2, PrevLogTerm: 1, LeaderCommit: 2, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:24 [2 - Leader] - follower 1 try to commit range: 3, 3
2017/03/16 14:58:24 [2 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:24 [2 - Leader] - lastApplied(before): 2...
2017/03/16 14:58:24 [2 - Leader] - send raft.LogEntry{Index:3, Term:1, Command:103} to applyCh...
2017/03/16 14:58:24 [2 - Leader] - lastApplied(after): 3...
2017/03/16 14:58:24 [1 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:24 [1 - Follower] - lastApplied(before): 2...
2017/03/16 14:58:24 [1 - Follower] - apply log raft.LogEntry{Index:3, Term:1, Command:103}...
2017/03/16 14:58:24 [1 - Follower] - lastApplied(after): 3...
2017/03/16 14:58:25 [2 - Leader] - received an append msg: &{{0 0 104} true 0xc4201e9f20}...
2017/03/16 14:58:25 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 3, PrevLogTerm: 1, LeaderCommit: 3, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:25 [2 - Leader] - follower 1 try to commit range: 4, 4
2017/03/16 14:58:25 [2 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:25 [2 - Leader] - lastApplied(before): 3...
2017/03/16 14:58:25 [2 - Leader] - send raft.LogEntry{Index:4, Term:1, Command:104} to applyCh...
2017/03/16 14:58:25 [2 - Leader] - lastApplied(after): 4...
2017/03/16 14:58:25 [1 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:25 [1 - Follower] - lastApplied(before): 3...
2017/03/16 14:58:25 [1 - Follower] - apply log raft.LogEntry{Index:4, Term:1, Command:104}...
2017/03/16 14:58:25 [1 - Follower] - lastApplied(after): 4...
2017/03/16 14:58:25 [2 - Leader] - received an append msg: &{{0 0 105} true 0xc4202786c0}...
2017/03/16 14:58:25 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 4, PrevLogTerm: 1, LeaderCommit: 4, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:25 [2 - Leader] - follower 1 try to commit range: 5, 5
2017/03/16 14:58:25 [2 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:25 [2 - Leader] - lastApplied(before): 4...
2017/03/16 14:58:25 [2 - Leader] - send raft.LogEntry{Index:5, Term:1, Command:105} to applyCh...
2017/03/16 14:58:25 [2 - Leader] - lastApplied(after): 5...
2017/03/16 14:58:25 [1 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:25 [1 - Follower] - lastApplied(before): 4...
2017/03/16 14:58:25 [1 - Follower] - apply log raft.LogEntry{Index:5, Term:1, Command:105}...
2017/03/16 14:58:25 [1 - Follower] - lastApplied(after): 5...
2017/03/16 14:58:25 [2 - Leader] - received an append msg: &{{0 0 106} true 0xc420272ae0}...
2017/03/16 14:58:25 [1 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 1, LeaderId: 2, PrevLogIndex: 5, PrevLogTerm: 1, LeaderCommit: 5, reply: {AppendEntriesReply - Term: 1, Success: true}...
2017/03/16 14:58:25 [2 - Leader] - follower 1 try to commit range: 6, 6
2017/03/16 14:58:25 [2 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:25 [2 - Leader] - lastApplied(before): 5...
2017/03/16 14:58:25 [2 - Leader] - send raft.LogEntry{Index:6, Term:1, Command:106} to applyCh...
2017/03/16 14:58:25 [2 - Leader] - lastApplied(after): 6...
2017/03/16 14:58:25 [0 - Follower] - election timed out, promote to candidate...
2017/03/16 14:58:25 [0 - Candidate] - start to run as candidate...
2017/03/16 14:58:25 [2 - Leader] - step down signal sent...
2017/03/16 14:58:25 [2 - Leader] - received step down signal in leader loop...
2017/03/16 14:58:25 [1 - Follower] - election timer stopped...
2017/03/16 14:58:25 [1 - Follower] - vote not granted: {RequestVoteReply - Term: 2, VoteGranted: false}...
2017/03/16 14:58:25 [1 - Follower] - last: &{6 1 106}, args: {RequestVoteArgs - Term: 2, CandidateId: 0, LastLogIndex: 1, LastLogTerm: 1}...
2017/03/16 14:58:25 [1 - Follower] - election timer reset...
2017/03/16 14:58:27 [1 - Follower] - election timed out, promote to candidate...
2017/03/16 14:58:27 [1 - Candidate] - start to run as candidate...
2017/03/16 14:58:27 [0 - Candidate] - a larger Term seen, will fall back to Follower...
2017/03/16 14:58:27 [0 - Candidate] - election timer stopped...
2017/03/16 14:58:27 [0 - Candidate] - vote granted: {RequestVoteReply - Term: 3, VoteGranted: true}...
2017/03/16 14:58:27 [0 - Candidate] - election timer reset...
2017/03/16 14:58:27 [0 - Candidate] - state change from Candidate to Follower...
2017/03/16 14:58:27 [0 - Follower] - start to run as follower...
2017/03/16 14:58:27 [node: 0] - in runFollower()...
2017/03/16 14:58:27 [1 - Candidate] - got enough votes, promote to Leader...
2017/03/16 14:58:27 [1 - Leader] - start to run as leader...
2017/03/16 14:58:27 [1 - Leader] - decrement nextIndex by 1 and retry...
2017/03/16 14:58:27 [1 - Leader] - decrement nextIndex by 1 and retry...
2017/03/16 14:58:27 [1 - Leader] - decrement nextIndex by 1 and retry...
2017/03/16 14:58:27 [1 - Leader] - decrement nextIndex by 1 and retry...
2017/03/16 14:58:27 [0 - Follower] - follower/candicate received commit signal...
2017/03/16 14:58:27 [0 - Follower] - lastApplied(before): 1...
2017/03/16 14:58:27 [0 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 3, LeaderId: 1, PrevLogIndex: 1, PrevLogTerm: 1, LeaderCommit: 5, reply: {AppendEntriesReply - Term: 3, Success: true}...
2017/03/16 14:58:27 [0 - Follower] - apply log raft.LogEntry{Index:2, Term:1, Command:102}...
2017/03/16 14:58:27 [0 - Follower] - apply log raft.LogEntry{Index:3, Term:1, Command:103}...
2017/03/16 14:58:27 [0 - Follower] - apply log raft.LogEntry{Index:4, Term:1, Command:104}...
2017/03/16 14:58:27 [0 - Follower] - apply log raft.LogEntry{Index:5, Term:1, Command:105}...
2017/03/16 14:58:27 [0 - Follower] - lastApplied(after): 5...
2017/03/16 14:58:27 [1 - Leader] - follower 0 try to commit range: 2, 6
2017/03/16 14:58:27 [1 - Leader] - error tryToCommit to 0 to 6...
2017/03/16 14:58:27 [1 - Leader] - received an append msg: &{{0 0 106} true 0xc420310f60}...
2017/03/16 14:58:27 [0 - Follower] - appendEntries: args: {AppendEntriesArgs - Term: 3, LeaderId: 1, PrevLogIndex: 6, PrevLogTerm: 1, LeaderCommit: 5, reply: {AppendEntriesReply - Term: 3, Success: true}...
2017/03/16 14:58:27 [1 - Leader] - follower 0 try to commit range: 7, 7
2017/03/16 14:58:27 [1 - Leader] - receives commit signal, send to applyCh...
2017/03/16 14:58:27 [1 - Leader] - lastApplied(before): 5...
2017/03/16 14:58:27 [1 - Leader] - send raft.LogEntry{Index:7, Term:3, Command:106} to applyCh...
2017/03/16 14:58:27 [1 - Leader] - lastApplied(after): 7...
2017/03/16 14:58:27 apply error: server 1 apply out of order 7
exit status 1
FAIL	github.com/jhzhu89/mit_6.824/src/raft	5.714s
